import { Appear, Head, Image } from 'mdx-deck'
import { highlight, book, code, dark, future } from '@mdx-deck/themes'
import customTheme from './theme'
import freelanceLogo from './img/julian-logo.png'
import imgRichText from './img/rich-text.png'
import imgReact from './img/react-icon.png'
import imgMedium from './img/medium.png'
import imgNotion from './img/notion.png'
import imgNoCode from './img/nocode_logos.png'
import imgPaper from './img/paper.png'
import imgDjsp from './img/djsp.png'
import imgTettra from './img/tettra.png'
import imgTwitter from './img/twitter-editor.png'
import imgCkEditor from './img/ck-editor-5.png'
import imgDraftJs from './img/draft-js.png'
import imgProductComparison from './img/editor-products-comparison.svg'
import imgFroala from './img/froala.png'
import imgTiny from './img/tiny.png'
import imgGoogleDocs from './img/google-docs.png'
import imgGutenberg from './img/gutenberg.png'
import imgGutenbergReviews from './img/gutenberg-reviews.png'
import imgMxstbrDraft from './img/mxstbr-draft.png'
import imgMxstbrRegrets from './img/mxstbr-regrets.png'
import imgSlate2 from './img/slate-2.png'
import imgSlate from './img/slate.png'
import imgTrix from './img/trix.png'
import imgVsCodeModel from './img/vscode-change.png'
import imgWebFlowInvestment from './img/webflow-investment.png'
import imgDocModel from './img/document-model.svg'
import imgTree from './img/tree.svg'
import imgMinimalApi from './img/minimal-api.png'
import imgUpdateModel from './img/update-model.svg'
import imgUpdateModel2 from './img/update-model-2.svg'
import imgZettelModel from './img/zettel-model.svg'

import './index.css'

export const themes = [highlight, customTheme]

---

## Editing the world
## ‚úèÔ∏è
## with Zettel and React

---

## :wave: Hello Kyiv! I'm Julian

<Appear>

I'm a freelance software engineer 

<span className="hire-me">reactrocket.com</span>

‚úé I specialize in building editors

</Appear>

---

<Image src={imgTettra}>
  <span className="badge">Like this</span>
  <Appear>
    <div className="stack rotate-1"><img src={imgGoogleDocs} /></div>
    <div className="stack rotate-2"><img src={imgMedium} /></div>
    <div className="stack rotate-3"><img src={imgTwitter} /></div>
    <div className="stack rotate-4"><img src={imgNotion} /></div>
  </Appear>
</Image>

---

### Why should you care?

<Appear>

Editors are everywhere

You already use this right? `<input type="text" />`

Demand is increasing!!

</Appear>

---

<img src={imgWebFlowInvestment} />

---

### Who's building editors?

---

## Document Editing/Collaboration
* Dropbox Paper
* Confluence
* Google Docs

---

## Email
* Gmail
* Mailchimp
* Campaign Monitor

---

### Task Management/Collaboration
* Notion.so
* Basecamp
* Workflowy

---

## Communication tools
* Slack
* Discord

---

## Social Media
* Twitter
* Facebook

---

## Headless CMS
* Contentful
* Zesty

---

## Publishing Platforms
* Wordpress
* Medium

---

## Website Builders & No Code
* Squarespace
* Wix
* webflow

---

## What features are they building?

---

- Rich Text
- Tables
- Embedded Content (i.e. Images ands Video)
- Syntax Highlighting
- Collaborative Editing
- File uploads
- Drag and Drop functionality
- Configurable Layouts

---

<img style={{width: '100%'}} src={imgProductComparison} />

---

## What is an editor

---

`<input />`

---

`<textarea></textarea>`

---

`<div contenteditable="true"></div>`

---

## `contentEditable`

<Appear>

Originally developed by Microsoft  (ca 1999)

Other browsers implement without spec

The w3 spec is still in draft

</Appear>

---

## What tools can you use

---

<img src={imgTiny} />

---

<img src={imgFroala} />

---

<img src={imgTrix} />

---

<img src={imgGutenberg} />

---

<img src={imgGutenbergReviews} />

---

<img src={imgSlate} />

---

<img src={imgSlate2} />

---

<img src={imgDraftJs} />

---

<img src={imgDjsp} />

---

<img src={imgMxstbrRegrets} />

---

<img src={imgMxstbrDraft} />

---

## Building editors is hard

---

<img src={imgDocModel} />

---

<img src={imgTree} />

---

<img src={imgUpdateModel} />

---

<img src={imgUpdateModel2} />

---

<img src={imgVsCodeModel} />

---

<Appear>

## Updating Trees is hard

## Updating Flat structures is easy

</Appear>

---

<div contentEditable={true} style={{display: 'flex', justifyContent: 'space-between', paddingRight: '3em', alignItems: 'center' }}>

```
One
Two
Three
```

</div>

```
text.slice(0, 4) + string.slice(9, 12)
```



---

<img src={imgZettelModel} />

---

### Introducing Zettel

- Written in typescript :rocket:
- It's tiny - currently sub 30kb minified
- 0 dependencies :tada:
- State module can be used with any framework
- Changes are atomic - replayable and serializable

---

## Standing on the shoulders of giants

---

## Disclaimer

- DO :fire: NOT :fire: USE :fire: IN :fire: PROD 
- I'm the only one working on it (atm)
- Architecture is still in it's early stages.
- I welcome contributions

---

## Approach

---

## Zettel is a library not a framework

---

<img src={imgMinimalApi} />

---

## The Change Object

```typescript
type Change = {
  start: number,
  end: number,
  value: Value
}
```

--- 

Naive implementation of `change(Change)`:

```
const { start, end, value } = change

const newValue =
  text.slice(0, start)
  .concat(value)
  .concat(text.slice(end, text.length))
```

---

## Changing selection 

```js
{
  start: 3,
  end: 8
}
```

---

## Inserting text 

```js
{
  start: 3,
  end: 3,
  value: 'Hello Kyiv'
}
```

---

## Replacing text 

```js
{
  start: 3,
  end: 9,
  value: 'Goodbye Kyiv'
}
```

---

## Inserting styled text 

<div style={{ fontSize: 22 }}>

```js
{
  start: 3,
  end: 3,
  value: [{
    char: 'H',
    styles: ['bold']
  }, {
    char: 'i',
    styles: ['bold']
  }]
}
```

</div>

---

## Inserting a new block

<div style={{ fontSize: 26 }}>

```js
{ start: 3,
  end: 3,
  value: [
    { type: 'block-start' },
    { char: 'H' },
    { char: 'i' },
    { type: 'block-end' }]}
```

</div>

---

## Inserting a custom block

<div style={{ fontSize: 28 }}>

```js
{
  start: 3,
  end: 3,
  value: [{
    type: 'block',
    type: 'youtube',
    data: { src: 'http://somelink' }}]}
```

</div>

---

## Live coding time :fire:

---

## Roadmap

- Android support (via level 2 input events)
- Prototype collaborative editing
- Alternative view layers (vuejs/svelte/angular)
- Docs üòÖ
- First stable release

---

### That's it thank you so much Kyiv listening :pray:

- Twitter: @juliandoesstuff
- Github: juliankrispel/zettel
